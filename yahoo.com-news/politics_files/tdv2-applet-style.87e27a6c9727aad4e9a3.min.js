webpackJsonp([64],{1235:function(e,t,i){e.exports={controllerViews:{StyleCover:i(2735)},stores:{StyleCoverStore:i(1815)}}},1815:function(e,t,i){"use strict";function o(e){if(e){var t=null,i={};return e.url&&e.width&&e.height&&(t={size:"original",url:e.url,width:e.width,height:e.height}),t?(i.desktop=i.desktop||t,i.tablet=i.tablet||i.desktop,i.smartphone=i.smartphone||i.tablet||i.desktop,i):null}}var r=i(279).createImmutableStore,n=i(6).fromJS({id:void 0,image:void 0,coverType:void 0,clickThroughUrl:void 0,name:void 0,description:void 0});e.exports=r({storeName:"StyleCoverStore",statics:{handlers:{LOAD_STYLE_COVER_SUCCESS:"_loadStyleCover",UPDATE_CURRENT_NAV:"_loadCurrentNav"}},initialize:function(){this._state={navId:"",site:"",data:n}},_loadStyleCover:function(e){if(e){for(var t=e.styleCovers||[],r={},n=0;n<t.length;n++){var s=t[n].info||{},a=s.tag;if(a){var l="",c=s.coverType,d=a.toLowerCase(),h=s.clickThroughUrl?s.clickThroughUrl.replace(/https:\/\/www.yahoo.com/,""):void 0;"img"===c||"mini-img"===c||"tagged-header"===c?l=s.tag:"video"===c&&(l=s.videoId),r[d]={id:l,coverType:c,clickThroughUrl:h,image:o(s.image),name:s.name,description:s.description}}}this._state.data=i(6).fromJS(r),this._state.site=e.site}this.emitChange()},_loadCurrentNav:function(e){e&&(this._state.navId=e.navId),this.emitChange()},getStyleCover:function(){var e=this._state.data,t=this.getNavId();if(t){if(e.has(t))return e.get(t);if("home"!==t)return i(6).fromJS({id:t,coverType:"tagged-header-default",nav:"MAGTOPOCTAG:".navId,name:t.replace(/-/g," ")})}return n},hasDataForSite:function(e){return this._state.site===e},getNavId:function(){return this._state.navId},dehydrate:function(){return this._state},rehydrate:function(e){e&&(this._state.site=e.site,this._state.navId=e.navId,this._state.data=i(6).fromJS(e.data))}})},2734:function(e,t,i){"use strict";e.exports=function(e,t,o){var r=e.getStore("RouteStore"),n=e.getStore("StyleCoverStore"),s=i(2)(t,["componentProps","componentConfig"],{}),a=i(2)(e,["session","dimensions"],{}),l=s.site||"style",c=a.region||"US",d=a.lang||"en-US",h=s.staticCover;if(r&&!h){var g=r.getCurrentRoute().params||{};h=g.section||g.alias||g.tag||g[s.customKey],h=s.stripSlash?h.replace(/\//g,""):h}if(h=h||s.nav||"home",e.dispatch("UPDATE_CURRENT_NAV",{navId:h.toLowerCase()}),n.hasDataForSite(l))return void(o&&o());e.service.read("ComponentDataService",{applet:"tdv2-applet-style",schema:"cover",context:{site:l,region:c,lang:d},feRedisEnabled:s.feRedisEnabled},{},function(t,i){if(t)return void(o&&o(t));var r=[];if(i&&i.length>0)for(var n=0;n<i.length;n++){var s={tag:"cover:"+i[n].tag,info:{tag:i[n].tag,coverType:i[n].coverType,clickThroughUrl:i[n].clickThroughUrl,name:i[n].title,description:i[n].description,image:i[n].coverImage,videoId:i[n].videoId}};r.push(s)}return e.dispatch("LOAD_STYLE_COVER_SUCCESS",{site:l,styleCovers:r}),void(o&&o())})}},2735:function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var r,n,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},a=i(17).I13nAnchor,l=i(30).Icon,c=i(279).ComponentMixin,d=i(199).WindowResize,h=i(199).WindowScroll,g=i(487).components.AdComponent,m=(0,(n||function(){return n=i(28)}()).injectIntl)(i(4)({displayName:"StyleCover",mixins:[i(14),c,h,d],statics:{componentConfig:{name:"componentStyleCover"},storeListeners:[i(1815)],ignoreImmutableCheck:{props:{i13n:!0,messages:!0,locales:!0,componentConfig:!0,intl:!0},state:{config:!0}}},contextTypes:{session:(r||function(){return r=o(i(0))}()).default.object.isRequired},_getState:function(){return{stylecover:this.getStore(i(1815)).getStyleCover(),config:this.props.componentConfig||{}}},getInitialState:function(){this.getStore(i(1815));return this._getState()},onChange:function(){this.setState(this._getState())},componentDidMount:function(){this.updateCover()},componentWillUnmount:function(){"img"===this.state.stylecover.get("coverType")&&this.props.componentConfig.enableMosiac&&(this.jumpToMosaic=this.jumpToMosaic||i(10).findDOMNode(this.refs.jumpToMosaic))&&this.jumpToMosaic.removeEventListener("click",this.handleJumpToMosaicClick)},componentDidUpdate:function(){this.updateCover()},shouldComponentUpdate:function(e,t){return this.state.stylecover.get("id")!==t.stylecover.get("id")},updateCover:function(){var e=this.state.stylecover.get("coverType");"img"===e&&this.props.componentConfig.enableMosiac&&(this.imgCoverEl=i(10).findDOMNode(this.refs.imgCover),this.jumpToMosaic=i(10).findDOMNode(this.refs.jumpToMosaic),this.coverVideoPlayerEl=i(10).findDOMNode(this.refs.coverVideoPlayer),this.onWindowScroll(),this.jumpToMosaic&&(this.jumpToMosaic.addEventListener("click",this.handleJumpToMosaicClick),this.jumpToMosaic.style.visibility="visible")),"video"===e&&this.resizeVideoPlayer()},resizeVideoPlayer:function(){"video"===this.state.stylecover.get("coverType")&&((this.coverVideoPlayerEl=this.coverVideoPlayerEl||i(10).findDOMNode(this.refs.coverVideoPlayer))&&(this.coverVideoPlayerEl.style.height=window.innerWidth/1.77+"px"))},handleJumpToMosaicClick:function(e){e.preventDefault(),this.imgCoverEl=this.imgCover||i(10).findDOMNode(this.refs.imgCover),i(494)(this.imgCoverEl.offsetTop+this.imgCoverEl.offsetHeight,300)},imgCoverScroll:function(){this.imgCoverEl=this.imgCoverEl||i(10).findDOMNode(this.refs.imgCover),(this.jumpToMosaic=this.jumpToMosaic||i(10).findDOMNode(this.refs.jumpToMosaic))&&this.imgCoverEl&&this.imgCoverEl.getBoundingClientRect&&(this.jumpToMosaic.style.position=this.imgCoverEl.getBoundingClientRect().bottom<window.innerHeight?"absolute":"fixed")},onWindowScroll:function(){this.imgCoverScroll()},onWindowResize:function(){this.resizeVideoPlayer()},onPlayerReady:function(){(this.imgCoverEl=this.imgCover||i(10).findDOMNode(this.refs.imgCover))&&(this.imgCoverEl.style.display="none")},generateRapidDataAttr:function(e,t){return{sec:"cover-img",slk:e,t1:"a1",t2:"img",t3:t,itc:0,elm:"itm",g:e}},renderVideoCover:function(e,t){var o=this.context.session.dimensions.device,r=[],n="100px",a={playlist:{mediaItems:[{id:e}]},comscoreC4:this.context.session.site,region:this.context.session.regions,addViewportHandler:!0,autoplay:"desktop"===o};t.getIn([o,"url"])&&(n=t.getIn([o,"height"]),r.push(i(1).createElement(i(73),{className:"W(100%) H(100%) Pos(a) Z(5)",forceLoad:!0,url:t.getIn([o,"url"]),alt:this.props.intl.formatMessage({id:"STYLE_COVER"}),ref:"imgCover"})));var l={className:"D(b)",yvpConfig:a,width:"100%",height:n.toString(),onPlayerReady:this.onPlayerReady};return i(1).createElement("div",{className:"Pos(r)"},r,i(1).createElement(i(505),s({},l,{ref:"coverVideoPlayer"})))},renderImgCover:function(e,t,o){if(!t)return null;var r=this.context.session.dimensions.device,n=t.getIn([r,"url"])||t.getIn(["desktop","url"]),s=e||"",a=this.props.componentConfig,l=a.followLink||"/"!==s.charAt(0),c=a.isLDRBEnabled||!1,d=a.adPos||"LDRB-9",h=a.adStyle;return i(1).createElement("div",{className:"Pos(r)",ref:"imgCover"},c?i(1).createElement(g,{pos:d,style:h}):null,s?i(1).createElement(i(278),{className:"D(b) Td(n)",href:s,followLink:l},i(1).createElement(i(73),{className:"W(100%) H(100%)",forceLoad:!0,url:n,alt:this.props.intl.formatMessage({id:"STYLE_COVER"})})):i(1).createElement(i(73),{className:"W(100%) H(100%)",forceLoad:!0,url:n,alt:this.props.intl.formatMessage({id:"STYLE_COVER"})}),"img"===o?this.anchorIcon():null)},anchorIcon:function(){return i(1).createElement(a,{className:"anchor D(b) Pos(f) Start(50%) B(30px) H(40px) W(40px) Z(3) O(0) Bdw(3px) Bds(s) Bdc(#fff) Bdrs(50%) V(h)",href:"#",ref:"jumpToMosaic"},i(1).createElement(l,{asset:i(1146),className:"Pos(a) Start(12px) T(14px)",color:"#fff",height:16}))},renderDescription:function(e){if(!e)return null;var t=i(5)("D(i) Lh(1.1) Lts(.02em) Fz(13px) Fw(400) Mt(10px) Mstart(10px)",this.props.componentConfig.maxWidth,this.props.componentConfig.marginTop);return i(1).createElement("div",{id:"th-description",dangerouslySetInnerHTML:{__html:e},className:t})},renderTextCover:function(e,t,o){var r=this.props.componentConfig;if(r.disableTaggedHeader)return null;var n=r.fontSmoothing,s={WebkitFontSmoothing:n,MozFontSmoothing:n,MsFontSmoothing:n,OFontSmoothing:n,FontSmoothing:n},a=i(5)("tagged-header Pos(r) Ov(h) Bgz(a) Bgr(nr) Bgp(start_t) Pt(20px) Pb(10px) Bxz(bb) ",r.leftPadding,r.textColor,r.bgColor,r.minHeight),l=i(5)("D(i) Lh(1.2) Lts(0) Fz(21px) Fw(600)",{"Tt(c)":o});return i(1).createElement("div",{className:a,style:s},i(1).createElement("h1",{id:"th-title",className:l},e),this.renderDescription(t))},render:function(){var e=this,t=this.state.stylecover,o=t.get("image"),r=t.get("coverType"),n=t.get("name"),s=t.get("description"),a=t.get("clickThroughUrl"),l=t.get("id"),c="tagged-header-default"===r;return"video"===r&&!l||"img"===r&&(!o||!a)||"mini-img"===r&&!o||"tagged-header"===r&&!n||"tagged-header-default"===r&&!n?null:i(1).createElement("div",{id:this.props.id,className:"M(0) Maw(100%) P(0) "+r,i13nModel:e.generateRapidDataAttr("seemore",r),ref:"styleCover"},"video"===r?this.renderVideoCover(l,o):"tagged-header"===r||"tagged-header-default"===r?this.renderTextCover(n,s,c):this.renderImgCover(a,o,r))}}));m.componentConfig={name:"componentStyleCover"},m.initializeAction=i(2734),e.exports=m}});