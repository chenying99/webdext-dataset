webpackJsonp([36],{1156:function(t,e,n){"use strict";t.exports=function(t,e,o){var s=t.session.query,i=t.getStore(n(189)).getState(),r=e.instanceId,a=e.oauthConsumerKey||i.oauthConsumerKey,u=e.oauthConsumerSecret||i.oauthConsumerSecret,l=e.namespace||s.namespace||i.namespace,c=e.recommended;if(!r||!u||!a)return o("Required fields missing",null);var d=t.getStore(n(187)).getCommentsState(r),h=e.tagsAnd||d.tagsAnd||null,p=e.tagsOr||d.tagsOr||null,m=e.context||s.context||"YahooGlobal";if(c&&d.get("recommendedTags")||!c&&d.get("relatedTags"))return o&&o();var g={context:m,count:e.count||10,lang:e.lang||i.lang||"en-US",namespace:l,region:e.region||i.region||"US",oauthConsumerKey:a,oauthConsumerSecret:u};g.query=n(191).createSearchQuery(h,p,m,l),t.service.read(c?"canvass.getRecommendedTags_ns":"canvass.getTrendingTags_ns",g,{},function(e,n){return e||!n||n.error?o():(c?t.dispatch("CANVASS_GET_RECOMMENDED_TAGS_SUCCESS",{instanceId:r,recommendedTags:n}):t.dispatch("CANVASS_GET_RELATED_TAGS_SUCCESS",{instanceId:r,relatedTags:n}),o())})},t.exports.displayName="loadRelatedTags"},1202:function(t,e,n){t.exports={controllerViews:{CanvasStickyShareButtons:n(2624)},meta:{dependencies:["tdv2-applet-canvass","tdv2-applet-follow","react-share-buttons"],langBundle:"tdv2-applet-content-canvas"}}},1295:function(t,e,n){"use strict";var o={article:"story"},s="undefined"!=typeof window;t.exports={isLazyLoad:function(t,e){return e>=0&&t<e},isSidekick:function(t){return t&&-1!==t.indexOf("SIDEKICK")},updateQueryParam:function(t,e){e=e||{};var o=n(21).parse(t,!0);return o.search=void 0,o.query=Object.assign({},o.query,e),n(21).format(o)},getLoopIndex:function(t,e,n){if(!n)return t+e;var o=(t+e)%n;return o<0?o+n:o},getRelatedUuids:function(t,e,n){var o=e.length,s=[];if(0===o||0===t||n>=o)return s;for(var i=n;s.length<t&&(i=++i%o)!==n;)e[i]&&e[i].uuid&&s.push(e[i].uuid);return s},getResizedImage:function(t,e){return t=t||{},t[e]||t.original},getCommentString:function(t){if(!t)return"";return t>=1e6?parseFloat((t/1e6).toFixed(2))+"m":t>=1e5?parseFloat((t/1e3).toFixed(0))+"k":t>=1e3?parseFloat((t/1e3).toFixed(1))+"k":t.toString()},getBaseI13n:function(t,e,n){var s=t.type,i={itc:0,g:t.uuid||t.id};this.isSidekick(n)?(i.cat=n,i.ccode=t.ccode,i.ct=o[s]||s,i.subsec="sentiment",i.sec="sdkick"):i.sec="jtc";var r=this.parseUrl(t.link||t.url||"");r&&(i.tar=r.host,i.tar_uri=r.pathname);var a=t.title;return a&&(i.slk=a),i.cpos=e+1,i.pos=e+1,i},getTypeIcon:function(t){var e=["video","slideshow"],n=t.type;return e.indexOf(n)>=0?n:""},getSentimentsRatio:function(t,e,n){if(void 0===t||void 0===n||void 0===e)return null;var o=t+n+e;if(!o)return null;var s=Math.round(t/o*100),i=Math.round(n/o*100);return{negative:s,neutral:i,positive:100-s-i}},parseUrl:function(t){if(t=t.split("?")[0]){if("/"===t.charAt(0))return{host:s?window.location.host:"",pathname:t,protocol:s?window.location.protocol:""};var e=t.split("/");return{host:e[2],pathname:"/"+e.slice(3).join("/"),protocol:e[0]}}return null},processStreamData:function(t){var e=t.get("comments")||n(6).Map(),o=e.toJS(),s=t.get("images")||n(6).Map();return{bypassModal:t.get("bypassModal"),ccode:t.get("ccCode"),commentCount:parseInt(o.totalCount,10)||0,imageSize:s.toJS(),link:t.get("link")||"",title:t.get("title")||"",topRatedComments:o.topRated||[],total_negative_comments:parseInt(o.negativeCount,10)||0,total_neutral_comments:parseInt(o.neutralCount,10)||0,total_postive_comments:parseInt(o.positiveCount,10)||0,type:t.get("subtype")||t.get("type"),uuid:t.get("id")||""}}}},1421:function(t,e,n){t.exports=function(t,e){if(!t)return null;var o=t.get("summary")||"",s=t.get("title")||"";"slideshow"===t.get("contentType")&&o.length>800&&(o=s);var i=n(2)(e,["layout","image"],"");return{uuid:t.get("uuid")||"",link:t.get("url")||"",alias:t.get("alias")||"",title:s,description:o,picture:t.getIn(["thumbnail","url"])||i}}},1536:function(t,e,n){"use strict";var o=n(284).ShareButtonsConfig,s=n(1163).FollowContent,i=n(284).ShareButtonGroup;t.exports={statics:{storeListeners:[n(74)]},contextTypes:{getStore:n(0).func.isRequired,renderTarget:n(0).object,session:n(0).object.isRequired},propTypes:{alignLeft:n(0).bool,buttonSpacingPixels:n(0).number,contentId:n(0).string,commentScrollMarginTop:n(0).number,iconSize:n(0).number,maxSquareWidth:n(0).number,minSquareWidth:n(0).number,orientation:n(0).string,persistToolTip:n(0).bool,roundButtonDiameter:n(0).number,shouldUseBrowserUrl:n(0).bool,showTooltipAtBottom:n(0).bool,useButtonColorForBackground:n(0).bool,hideText:n(0).bool,ylkData:n(0).object},getDefaultProps:function(){return{alignLeft:!1,buttonSpacingPixels:8,contentId:void 0,commentScrollMarginTop:void 0,iconSize:20,maxSquareWidth:void 0,minSquareWidth:void 0,orientation:o.orientation.HORIZONTAL,persistToolTip:!1,roundButtonDiameter:40,shouldUseBrowserUrl:!0,showTooltipAtBottom:!1,useButtonColorForBackground:!0,hideText:!1,ylkData:{}}},getInitialState:function(){return this.config=n(2)(this.props,["componentConfig","shareButtons"])||{},this.contentStore=this.getStore(n(74)),this.langStore=this.getStore("LangStore"),this.pageStore=this.getStore(n(8)),this.routeStore=this.getStore("RouteStore"),this._getState(this.props.contentId)},onChange:function(t){this.props.contentId||this.setState(this._getState())},componentWillReceiveProps:function(t){t.contentId!==this.props.contentId&&this.setState(this._getState(t.contentId))},_getState:function(t){var e=this.contentStore,o=this.context.renderTarget||{},s=t?e.getContentByUUID(t):e.getCurrentContent(o.id),i=this.routeStore.getCurrentRoute()||{},r={};this.pageStore&&(r=this.pageStore.getPageConfig()),s=s||n(6).Map();var a=s.get("uuid")||"",u=n(1421)(s,r),l=n(45).isLcpContent(s),c=l?this.config.lcpButtons:this.config.buttons;return{buttons:n(6).List(c),isLcp:l,isCurrentRenderTarget:this._isCurrentRenderTarget(),shareMeta:u,site:n(45).getContentSite(i,this.context),twitterId:this._getTwitterId(),uuid:a,ylk:Object.assign({},this.props.ylkData,{uuid:a})}},_isCurrentRenderTarget:function(){return n(2)(this,["context","renderTarget","id"])===(this.pageStore&&this.pageStore.getCurrentRenderTargetId())},_getDevice:function(){return n(2)(this.context,["session","dimensions","device"],"smartphone")},_getTwitterId:function(){var t=this.pageStore.getPageData(),e=n(2)(t,["meta","property","twitter:site"])||n(2)(t,["meta","name","twitter:site"])||"Yahoo";return"@"===e.charAt(0)&&(e=e.slice(1)),e},_getStyles:function(t){return n(2)(this.config,["styles",t])},renderLikeButton:function(){var t=this.config;if(!this.props.enableLikeButton||this.state.isLcp||!this.state.uuid)return null;var e={initial:"#f23347",hovered:"#f23347"};t.enableRoundShareButtons&&(e={initial:"#fff",hovered:"#d1282d",selected:"#ff4d53"});var o={className:this._getStyles("likeButtonClasses"),colors:e,enableRoundShape:t.enableRoundShareButtons,enableHoverColor:t.enableHoverColor,enableHoverColorTransition:t.enableHoverColorTransition,enableTooltip:this.props.persistToolTip,iconClasses:this._getStyles("likeIconClasses"),iconSize:this.props.iconSize,overrideTooltipClasses:this._getStyles("tooltipClasses"),persistTooltip:this.props.persistToolTip,uuid:this.state.uuid,ylkData:this.state.ylk};return n(1).createElement("div",{className:this._getStyles("likeClasses"),key:"like"},n(1).createElement(s,o))},renderShareButtonGroup:function(){var t=this.config,e=t.buttonSize||o.size.LARGE,s=this.langStore.getStrings("tdv2-applet-content-canvas"),r=!1!==t.isTouchDevice,a={buttonShape:o.shape.SQUARE,buttonWidth:this._getStyles("buttonWidth"),iconRendererClassName:this._getStyles("iconRendererClasses"),iconSize:this.props.iconSize,maxSquareWidth:this.props.maxSquareWidth,minSquareWidth:this.props.minSquareWidth,persistToolTip:this.props.persistToolTip,persistTooltipClasses:n(5)(this._getStyles("shareButtonTooltipClasses"),{"D(n)":this.props.hideText,"End(9px) D(n)--modalFloatingCloseBtn":this.props.persistToolTip}),showShareInfoOnHover:!r,touchDevice:r,useButtonColorForBackground:this.props.useButtonColorForBackground};return t.enableRoundShareButtons&&(a={buttonShape:o.shape.ROUND,buttonSpacingPixelsSmall:this.props.buttonSpacingPixels,iconSize:this.props.iconSize,maxSquareWidth:this.props.maxSquareWidth,roundButtonDiameter:this.props.roundButtonDiameter,showShareInfoOnHover:!1,touchDevice:r,useButtonColorForBackground:this.props.useButtonColorForBackground,useHoverColor:t.enableHoverColor,enableHoverColorTransition:t.enableHoverColorTransition}),n(1).createElement(i,Object.assign({},a,{alignLeft:this.props.alignLeft,buttonsToShow:this.state.buttons,buttonSize:e,buttonOrientation:this.props.orientation,className:this._getStyles("outerContainerClasses"),key:"share",messages:s,metaData:this.state.shareMeta,sharingConfig:{device:this._getDevice(),shouldUseBrowserUrl:this.props.shouldUseBrowserUrl,site:this.state.site,twitterId:this.state.twitterId},showTooltipAtBottom:this.props.showTooltipAtBottom,ylkData:this.state.ylk}))}}},1537:function(t,e,n){"use strict";var o="undefined"!=typeof window?window:null;t.exports=n(4)({autobind:!1,displayName:"Flyout",mixins:[n(14)],propTypes:{align:n(0).oneOf(["left","right"]),alignToViewport:n(0).bool,componentProps:n(0).object.isRequired,fixedToParent:n(0).bool,flyoutWidth:n(0).number,flyoutHeight:n(0).number,onMouseEnter:n(0).func,onMouseLeave:n(0).func,parentNode:n(0).object.isRequired,relativeToParent:n(0).bool,triangleFillColor:n(0).string},getDefaultProps:function(){return{align:"right",Component:null,componentProps:{},flyoutWidth:370,flyoutHeight:482,parentNode:null,relativeToParent:!1,triangleFillColor:"#ffffff"}},calculatePositions:function(){var t=this.props;if(!o)return null;var e=t.flyoutHeight,n=t.parentNode&&t.parentNode.getBoundingClientRect();if(!n)return null;var s=n.height/2,i=0;t.fixedToParent&&(i=n.top-o.innerHeight+e);var r=o.innerHeight-n.top;if(t.alignToViewport&&r<e){var a=this.getViewPortAlignedPos(r,i,e,n.height);s=a.arrow,i=a.flyout}return"left"===t.align?this.getLeftAlignedFlyoutStyles(s,i,n.top,n.left):"right"===t.align?this.getRightAlignedFlyoutStyles(s,i,n.top,n.right):null},getLeftAlignedFlyoutStyles:function(t,e,n,o){var s=this.props,i=-(s.flyoutWidth+s.paddingRight);return s.relativeToParent||(e+=n,i+=o),{arrowStyles:{left:s.flyoutWidth+1,top:t,transform:"rotate(180deg)"},wrapperStyles:{left:i,top:e}}},getRightAlignedFlyoutStyles:function(t,e,n,o){var s=this.props,i=-(s.flyoutWidth+s.paddingLeft);return s.relativeToParent||(e+=n,i=-(i+o)),{arrowStyles:{right:s.flyoutWidth-1,top:t},wrapperStyles:{right:i,top:e}}},getViewPortAlignedPos:function(t,e,n,o){var s=t<o/2,i=n-t;return{arrow:s?i:i+o/2,flyout:-i}},render:function(){var t=this.props,e=t.Component;if(!e||!t.parentNode)return null;var o=this.calculatePositions();if(!o)return null;var s={height:t.flyoutHeight,width:t.flyoutWidth,paddingTop:t.paddingTop||0,paddingBottom:t.paddingBottom||0,paddingLeft:t.paddingLeft||0,paddingRight:t.paddingRight||0},i=o.arrowStyles,r=t.componentProps,a=Object.assign({},s,o.wrapperStyles),u={borderRightColor:t.triangleFillColor};return n(1).createElement("div",{className:"Pos(a)",style:a,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave},n(1).createElement(e,r),n(1).createElement("div",{className:"Z(3) C(t) Pos(a) W(0) H(0) Bds(s) Bdtc(t) Bdbc(t) Bdendc(#b9bdc5) Bdendw(12px) Bdtw(12px) Bdbw(12px)",style:i},n(1).createElement("div",{className:"Pos(r) Scale(1.4) T(-9px) W(0) H(0) Bdtc(t) Bdbc(t) Bds(s) Bdtw(9px) Bdbw(9px) Bdendw(9px)",style:u})))}})},2048:function(t,e,n){"use strict";function o(){return l=i(n(1))}function s(){return c=i(n(2))}function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l,c,d=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),h=function(t){function e(t){return r(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return u(e,t),d(e,[{key:"render",value:function(){var t=this.props,e=t.className,n=t.items,i=t.index,r=n&&n[i];if(!r)return null;var a=r.comment,u=(0,(c||s()).default)(r,["userProfile","nickName"]);return u=u?u+": ":null,(l||o()).default.createElement("p",{className:e},(l||o()).default.createElement("span",{className:"Fw(b)"},u),(l||o()).default.createElement("span",{dangerouslySetInnerHTML:{__html:a}}))}}]),e}((l||o()).default.Component);h.defaultProps={index:0,items:[]},h.displayName="CommentSlider",e.default=h,t.exports=e.default},2049:function(t,e,n){"use strict";t.exports=n(4)({autobind:!1,displayName:"ProfileImageSlider",propTypes:{classNames:n(0).string,iconSize:n(0).number,index:n(0).number,items:n(0).array.isRequired},getDefaultProps:function(){return{classNames:"Pos(r) H(25px) W(32px)",iconSize:25,index:0,items:[]}},getItemStyle:function(t){return{left:6*t-4,transform:"scale("+(1-.12*(2-t))+")"}},getLoopIndex:function(t,e,n){var o=(t+e)%n;return o<0?o+n:o},getItems:function(){var t,e=this.props.index,o=n(2)(this.props,["items","length"],0),s=this.props.items,i=[];for(t=0;t<3;t++){var r=this.getLoopIndex(e,2-t,o),a=this.getItemStyle(t);i.push(n(1).createElement("li",{key:"jtd-item-"+r,className:"Pos(a)",style:a},n(1).createElement(n(73),{checkPosition:!1,className:"Bdrs(50%) Bdw(2px) Bdc(#ffffff) Bds(s) Bxz(bb)",height:this.props.iconSize,width:this.props.iconSize,url:s[r]})))}return i},render:function(){var t=this.props;if(0===t.items.length)return null;var e=this.getItems();return n(1).createElement("ul",{className:t.classNames},e)}})},2526:function(t,e){if(void 0===n)var n={};n["comments-fill"]={name:"comments-fill",height:16,width:16,path:"M3.396.667h9.228c1.507 0 2.73 1.194 2.73 2.667V10c0 1.474-1.223 2.668-2.73 2.668H4.556l-2.77 2.487c-.124.117-.288.18-.453.18-.09 0-.18-.02-.266-.056-.243-.107-.4-.347-.4-.612V3.335C.666 1.862 1.888.668 3.394.668zm7.958 4H4.687c-.368 0-.667.298-.667.667s.3.667.667.667h6.667c.37 0 .667-.298.667-.666s-.297-.667-.666-.667zM4.688 7.333c-.368 0-.667.298-.667.667s.3.667.668.667h6.667c.37 0 .667-.3.667-.667s-.298-.667-.667-.667H4.688z"},void 0!==t&&t.exports&&(t.exports=n["comments-fill"])},2621:function(t,e,n){"use strict";var o=n(30).Icon,s="undefined"!=typeof window?window:null;t.exports=n(4)({displayName:"CanvasCommentFlyout",autobind:!1,mixins:[n(14)],propTypes:{autoRotation:n(0).bool,messageList:n(0).array.isRequired,onClick:n(0).func,onCloseBtnClick:n(0).func,uuid:n(0).string},contextTypes:{i13n:n(0).object},getDefaultProps:function(){return{autoRotation:!1,messageList:[],rotationInterval:15e3}},getInitialState:function(){return this.timer=null,this._getState()},componentDidMount:function(){this.props.autoRotation&&this._enableAutoRotation(),this._fireLinkView()},componentWillReceiveProps:function(t){t.autoRotation?this._enableAutoRotation():this._disableAutoRotation(),t.url!==this.props.url&&this.setState(this._getState())},componentWillUnmount:function(){this._disableAutoRotation()},shouldComponentUpdate:function(t,e){return t.url!==this.props.url||e.commentIndex!==this.state.commentIndex},_enableAutoRotation:function(){s&&(this._disableAutoRotation(),this.timer=setInterval(function(){this._step(1)}.bind(this),this.props.rotationInterval))},_disableAutoRotation:function(){s&&this.timer&&clearInterval(this.timer)},_fireLinkView:function(t){this.context.i13n.executeEvent("beacon",{beaconType:"beaconLinkViews",arguments:[[{sec:"hl-viewer",_links:[{elm:"cmmt",outcm:"open",slk:"comments",subsec:"flyout"}]}]]},t)},_getState:function(){return{commentIndex:0}},_step:function(t){var e=n(2)(this.props,["messageList","length"],0);this.setState({commentIndex:n(1295).getLoopIndex(this.state.commentIndex,t,e)})},_processCommentsData:function(){return(this.props.messageList||[]).map(function(t){return{comment:n(2)(t,["details","userText"],""),userProfile:{nickName:n(2)(t,["meta","author","nickname"],"")}}})},render:function(){var t=this.props,e=this.state,s=e.commentIndex,i=t.messageList;if(i&&0===i.length)return null;var r=this._processCommentsData(),a=i.map(function(t){return n(2)(t,["meta","author","image","url"],"")});return n(1).createElement("div",{className:"Pos(r) Cur(p) Ai(c) D(f) W(100%) Bxsh(commentFlyoutShadow) Bg(#f7f8ff) Bdrs(3px) Bdw(1px) Bds(s) Bdc(#b9bdc5)",onClick:t.onClick},n(1).createElement("div",{className:"Fl(start) Pos(r) Pend(5px) Pstart(14px) Py(16px)"},n(1).createElement(n(2049),{classNames:"Pos(r) H(33px) W(44px)",iconSize:33,index:s,items:a})),n(1).createElement("div",{className:"Flxs(1) Pos(r) Pend(40px) Py(16px)"},n(1).createElement(n(2048),{className:"C(#000) Fz(13px) Lh(17px) LineClamp(2,34px)",items:r,index:s})),n(1).createElement("div",{className:"Pt(2px) Pos(a) End(0) T(0) Pend(6px)",onClick:t.onCloseBtnClick},n(1).createElement(o,{className:"close-btn",asset:n(105),height:14,color:"#787d82"})))}})},2624:function(t,e,n){"use strict";var o=n(1157).DockedContainer,s=n(289).DOCKPOS_TOP,i=n(289).DOCKPOS_BOTTOM,r=n(289).STATUS_FIXED_NEAR_BOTTOM,a=n(289).STATUS_RELEASED,u=n(289).STATUS_NEAR_RANGE;t.exports=n(4)({displayName:"CanvasStickyShareButtons",autobind:!1,mixins:[n(14),n(1536)],statics:{componentConfig:{bundleName:"tdv2-applet-content-canvas",name:"componentStickyShareButtons"}},shouldComponentUpdate:function(t,e){return e.uuid!==this.state.uuid||e.status!==this.state.status||e.winHeight!==this.state.winHeight||e.isCurrentRenderTarget!==this.state.isCurrentRenderTarget},shouldFreeze:function(){return!this._isCurrentRenderTarget()},componentWillMount:function(){this.shouldFreeze=this.shouldFreeze.bind(this),this.onStateChange=this.onStateChange.bind(this)},componentDidMount:function(){if("undefined"!=typeof window){this.setState({winHeight:window.innerHeight||document.documentElement.clientHeight})}this.subscriber=n(59)("resize",this.handleResize.bind(this),{enableResizeInfo:!0})},componentWillUnmount:function(){this.subscriber&&this.subscriber.unsubscribe()},handleResize:function(t,e){if(!this.shouldFreeze()){this.setState({winHeight:e.resize.height})}},onStateChange:function(t){this.setState({status:t.status,bottom:t.bottom})},renderCommentsButton:function(){if(!this.props.enableCommentsButton||this.state.isLcp&&!this.props.enableCommentsButtonOffnet)return null;var t=this.state.uuid,e=this.state.status,o=r===e||a===e,l=t?"article[data-uuid='"+t+"']":null,c=this.state.winHeight,d=this.state.bottom,h=40,p=i;c&&d&&(c-d<40+u&&(o=!0),c-d<40&&(p=s,h=d-40));var m={buttonSize:this.props.roundButtonDiameter,classNames:"",containerClassNames:"Mt(-40px)",dockPos:p,enableDockedCommentsFlyout:this.config.enableDockedCommentsFlyout,fixedY:h,iconClasses:this._getStyles("commentsIconClasses"),iconSize:this.props.iconSize,key:"comments",scrollMarginTop:this.props.commentScrollMarginTop,scrollTargetClass:"canvas-bottom-anchor-"+t,hideCommentCount:o,useHoverColor:this.config.enableHoverColor,uuid:t,bottomBoundarySelector:l,shouldFreeze:this.shouldFreeze};return n(1).createElement(n(2626),m)},render:function(){var t=this.state.uuid,e=t?"article[data-uuid='"+t+"']":null,i=n(5)("canvas-share-buttons StretchedBox",this._getStyles("transparentBgc")?"Bgc(t)":"Bgc(#fff)",this.props.className);return this._isCurrentRenderTarget()?n(1).createElement("div",{className:i},n(1).createElement(o,{bottomBoundarySelector:e,dockPos:s,fixedYSelector:".YDC-UH",shouldFreeze:this.shouldFreeze,onStateChange:this.onStateChange},n(1).createElement("div",{className:"Pb(48px)"},this.renderLikeButton(),this.renderShareButtonGroup())),this.renderCommentsButton()):null}})},2626:function(t,e,n){"use strict";var o=n(1157).DockedContainer,s=n(191).getCommentString,i=n(30).Icon,r=n(17).I13nButton,a=n(28).injectIntl,u=n(289).STATUS_ORIGINAL,l=n(289).STATUS_ORIGINAL_DISABLED,c=n(289).STATUS_FIXED_NEAR_TOP,d=n(289).DOCKPOS_BOTTOM;t.exports=a(n(4)({displayName:"DockedCommentsButton",autobind:!1,mixins:[n(14)],contextTypes:{i13n:n(0).object},statics:{storeListeners:[n(187)]},propTypes:{backgroundColors:n(0).object,bottomBoundary:n(0).string,buttonSize:n(0).number,classNames:n(0).string,containerClassNames:n(0).string,dockPos:n(0).string,fixedY:n(0).number,hideCommentCount:n(0).bool,iconClasses:n(0).string,iconColor:n(0).string,iconSize:n(0).number,scrollMarginTop:n(0).number,scrollTargetClass:n(0).string.isRequired,shouldFreeze:n(0).func,uuid:n(0).string.isRequired},getInitialState:function(){this.canvassStore=this.getStore(n(187)),this.currentNode=null,this.i13nModel={action:"click",itc:1,sec:"hl-viewer",slk:"comments",outcm:"open"};var t=this._getState(this.props);return t.hovered=!1,t},getDefaultProps:function(){return{backgroundColors:{initial:"#5601C0",hovered:"#320071"},bottomBoundary:null,buttonSize:40,classNames:"",containerClassNames:"",dockPos:d,fixedY:40,hideCommentCount:!1,iconClasses:"",iconColor:"#fff",iconSize:20,scrollMarginTop:-150,shouldFreeze:function(){return!1}}},onChange:function(){this.currentNode=n(10).findDOMNode(this.refs.dockedCommentsBtn),this.setState(this._getState(this.props))},componentWillMount:function(){this._commentsClickButtonHandler=this._commentsClickHandler.bind(this,"button"),this._commentsClickFlyoutHandler=this._commentsClickHandler.bind(this,"flyout"),this._onHover=this._onHover.bind(this),this.onChange=this.onChange.bind(this),this.onCloseBtnClick=this.onCloseBtnClick.bind(this),this.onStateChange=this.onStateChange.bind(this)},shouldComponentUpdate:function(t,e){return t.uuid!==this.props.uuid||t.fixedY!==this.props.fixedY||t.dockPos!==this.props.dockPos||t.hideCommentCount!==this.props.hideCommentCount||e.count!==this.state.count||e.hovered!==this.state.hovered||e.showFlyout!==this.state.showFlyout||e.status!==this.state.status},componentWillReceiveProps:function(t){t.uuid!==this.props.uuid&&this.setState(this._getState(t))},_getState:function(t){var e=this.canvassStore.getCommentsState("canvass-"+t.uuid),n=this.getCommentCount(e);if(e)return{count:n,countString:s(n),messageList:this.getMessageList(e),showFlyout:!0,url:this.getContextUrl(e)}},getCommentCount:function(t){return t&&t.get("count")||0},getContextUrl:function(t){return t&&t.get("contextUrl")||""},getMessageList:function(t){return t&&t.get("messageList").toJS()||[]},_getScrollTop:function(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop},_commentsClickHandler:function(t){var e=this;if("flyout"===t&&e.context.i13n.executeEvent("beacon",{beaconType:"beaconClick",arguments:["hl-viewer","comments",null,{elm:"cmmt",itc:1,outcm:"open"}]}),e.props.scrollTargetClass){var o=e.props.uuid,s=document.getElementsByClassName(e.props.scrollTargetClass)||[];if(s[0]){var i=s[0].getBoundingClientRect().bottom,r=e._getScrollTop()+i+e.props.scrollMarginTop;n(494)(r,null,null,function(){e.executeAction(n(1159),{context:o,instanceId:"canvass-"+o,isExpanded:!0})})}}},_onHover:function(){this.setState({hovered:!this.state.hovered})},onStateChange:function(t){this.setState({status:t.status})},onCloseBtnClick:function(t){t&&t.stopPropagation(),this.context.i13n.executeEvent("beacon",{beaconType:"beaconClick",arguments:["hl-viewer","comment_close",null,{elm:"close",itc:1,outcm:"close"}]}),this.setState({showFlyout:!1})},_getFlyoutProps:function(){var t=this.state.messageList;return t&&0===t.length?null:{autoRotation:!0,i13nModel:this.i13nModel,messageList:t,onClick:this._commentsClickFlyoutHandler,onCloseBtnClick:this.onCloseBtnClick,url:this.state.url,uuid:this.props.uuid}},renderCommentCount:function(){var t=this.state.count;if(!t)return null;var e=this.state.status,o=" Op(1)";e&&!this.props.hideCommentCount&&u!==e&&l!==e&&c!==e||(o=" Op(0)");var s="Pos(a) T(-20px) Start(0) End(0) C(#400090) Py(3px) Fw(b) Trsdu(.2s) Trsp(opacity)"+o;return n(1).createElement("div",{className:s},t)},renderCommentFlyout:function(){var t=this._getFlyoutProps();return t&&this.currentNode?n(1).createElement(n(1537),{align:"right",Component:n(2621),componentProps:t,fixedToParent:!0,flyoutWidth:682,flyoutHeight:71,parentNode:this.currentNode,relativeToParent:!0,paddingLeft:18,triangleFillColor:"#f7f8ff"}):null},render:function(){var t=this.props,e=this.state;if(!t.uuid)return null;var s=t.iconSize,a=n(5)("H(100%)",t.iconClasses),l=t.backgroundColors,c=parseInt(t.buttonSize,10)+"px",d=e.status,h={"aria-label":t.intl.formatMessage({id:"COMMENT",defaultMessage:"Comment"}),onClick:this._commentsClickButtonHandler,onMouseEnter:this._onHover,onMouseLeave:this._onHover,i13nModel:Object.assign({},this.i13nModel,{elm:"btn"}),width:c,className:"canvas-modal-comments-button Cur(p) P(0) O(n) Bdrs(50%) Trs(hoverColorTransition)",style:{width:c,height:c,backgroundColor:this.state.hovered?l.hovered:l.initial}},p="Trsdu(.2s) Trsp(scale)";p+=d!==u?" Scale(1)":" Scale(0)";var m=t.enableDockedCommentsFlyout&&e.showFlyout&&2===e.status;return n(1).createElement(o,{bottomBoundarySelector:t.bottomBoundarySelector,className:t.containerClassNames,dockPos:t.dockPos,fixedY:t.fixedY,shouldFreeze:t.shouldFreeze,onStateChange:this.onStateChange,innerZ:3},n(1).createElement("div",{ref:"dockedCommentsBtn",style:{width:c,height:c},className:"Ta(c)"},n(1).createElement("div",{className:p},this.renderCommentCount(),n(1).createElement(r,h,n(1).createElement(i,{asset:n(2526),className:a,color:t.iconColor,height:s,width:s})))),m?this.renderCommentFlyout():null)}}))}});